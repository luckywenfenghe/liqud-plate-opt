# 渐进式自适应步长策略
## Progressive Adaptive Move-Limit Strategy

### 概述
新的自适应步长策略采用"小步起始，逐渐增大"的方法，提高优化初期的稳定性和收敛性。

### 策略特点

#### 1. 双阶段步长调整
**阶段一：热身阶段 (Warmup Phase)**
- 持续时间：前 15 次迭代
- 步长策略：指数增长 `mvlim = mv_init × (1.08)^iteration`
- 目标：平稳启动，避免初期震荡

**阶段二：性能驱动阶段 (Performance-Based Phase)**
- 基于目标函数变化率调整
- 更保守的调整策略
- 持续微调优化

#### 2. 参数设置
```matlab
mv_max = 0.05      % 最大步长 (适中上限)
mv_min = 0.001     % 最小步长 (更低下限)  
mv_init = 0.01     % 初始步长 (小步起始)
warmup_iterations = 15    % 热身迭代次数
step_growth_rate = 1.04   % 热身期增长率 (更平缓)
tau_up = 1.15      % 性能好时的增长因子 (更保守)
tau_dn = 0.85      % 性能差时的减小因子 (更保守)
```

#### 3. 调整逻辑

**热身阶段 (迭代 1-15)**：
```matlab
target_mvlim = mv_init * (1.04 ^ loop)  % 更平缓的增长
mvlim = min(target_mvlim, mv_max * 0.5)  % 热身期限制在最大值的一半
```

**性能驱动阶段 (迭代 16+)**：
- `change > eps_hi`：良好进展 → `mvlim *= 1.15`
- `change < eps_lo`：进展缓慢 → `mvlim *= 0.85` (仅在热身后5次迭代后)
- 其他情况：保持或微增 → `mvlim *= 1.02`

#### 4. 特殊情况处理

**连续化步骤重置**：
```matlab
mvlim = max(mv_init * 1.5, mv_min)  % 重置到适中值而非最小值
```

**β投影变化**：
```matlab
mvlim = max(mvlim * 0.75, mv_min * 1.5)  % 较温和的减小
```

### 优势与效果

#### 1. 稳定性提升
- **避免初期震荡**：小步起始防止设计变量剧烈变化
- **平滑收敛**：渐进增长确保优化过程稳定

#### 2. 效率优化
- **自适应增长**：根据优化进展动态调整步长
- **智能重置**：在关键阶段适当重置步长

#### 3. 鲁棒性增强
- **保守调整**：较小的增减因子避免过度调整
- **多阶段控制**：不同阶段采用不同策略

### 监控与调试

#### 1. 输出信息
```
Warmup phase (5/15): mvlim = 0.014  # 热身阶段进度
mvlim: 0.025 ↗️                     # 步长增加指示
mvlim: 0.018 ↘️                     # 步长减少指示
```

#### 2. 关键指标
- **初始设置**：`Progressive move-limit: 0.010 → [0.005, 0.080] (warmup: 15 its)`
- **实时状态**：步长值及变化方向
- **阶段信息**：当前处于热身期还是性能驱动期

### 调优建议

#### 1. 参数调整
```matlab
warmup_iterations = 10-20    % 根据问题复杂度调整
step_growth_rate = 1.02-1.06 % 控制增长速度 (推荐1.04)
mv_init = 0.005-0.015        % 根据问题尺度调整
```

#### 2. 性能优化
- 监控前15次迭代的收敛性
- 观察步长变化趋势
- 根据具体问题调整参数

### 适用场景
- ✅ 复杂几何优化问题
- ✅ 多物理场耦合问题  
- ✅ 高分辨率网格优化
- ✅ 需要稳定收敛的场景

### 与原策略对比

| 方面 | 原策略 | 新策略 |
|------|--------|--------|
| 起始步长 | 最大值 | 小值 |
| 调整策略 | 从大到小 | 从小到大 |
| 初期稳定性 | 一般 | 优秀 |
| 收敛速度 | 快速但可能震荡 | 平稳且可靠 |
| 适应性 | 基于性能 | 双阶段自适应 |

---
*更新日期: 2025年6月*  
*版本: 2.0 - 渐进式自适应步长* 