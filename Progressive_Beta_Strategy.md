# 渐进式β投影策略
## Progressive Beta Projection Strategy

### 概述
新的β投影策略采用"延迟启动，平滑增长"的方法，避免传统阶梯式β增长带来的数值不稳定性。

### 策略特点

#### 1. 延迟启动机制
- **热身期**：前100次迭代保持 β = 1.0
- **目标**：让设计变量在低β值下稳定优化
- **优势**：避免过早的0-1二值化导致局部最优

#### 2. 平滑增长模式
```matlab
% 在第 100 次迭代后开始增长
if (loop > beta_warmup_iterations)
    growth_factor = beta_growth_rate ^ (loop - beta_warmup_iterations)
    beta = min(beta_init * growth_factor, beta_max)
end
```

#### 3. 参数设置
```matlab
beta_init = 1.0                    % 初始β值
beta_max = 32.0                    % 最大β值 (适中上限)
beta_growth_rate = 1.02            % 增长率 (非常温和)
beta_warmup_iterations = 100       % 热身迭代次数
```

### 增长时间表

| 迭代 | β值 | 备注 |
|------|-----|------|
| 1-100 | 1.0 | 热身期，保持低β |
| 110 | 1.22 | 开始缓慢增长 |
| 120 | 1.49 | 逐渐增强投影 |
| 150 | 2.70 | 中等投影强度 |
| 200 | 7.24 | 较强投影效果 |
| 250 | 19.4 | 高投影强度 |
| 300 | 32.0 | 达到最大值 |

### 与传统策略对比

#### 传统阶梯式策略
```matlab
beta_vec = [1 2 4 8 16 32 64 128]
% 每20次迭代跳跃到下一个值
```

#### 新渐进式策略
```matlab
beta = 1.0 * (1.02)^(loop - 100)
% 每次迭代增长2%
```

### 优势分析

#### 1. 数值稳定性
- ✅ **避免跳跃**：消除β值的突然变化
- ✅ **平滑过渡**：设计变量逐渐向0-1靠近
- ✅ **减少震荡**：避免阶梯式跳跃引起的震荡

#### 2. 优化性能
- ✅ **更好收敛**：平滑的β增长有利于收敛
- ✅ **避免局部最优**：延迟的高β值降低陷入局部最优的风险
- ✅ **自适应终止**：β达到最大值且收敛时自动停止

#### 3. 算法鲁棒性
- ✅ **参数容错**：对β增长率变化不敏感
- ✅ **可调节性**：容易调整热身期和增长率
- ✅ **适应性强**：适用于不同复杂度的问题

### 监控与输出

#### 1. 实时信息
```
Beta: 4.2                          # 当前β值
Beta updated: 4.1 → 4.2            # β值更新提示
```

#### 2. 初始设置
```
Beta growth: 1.0 → 32.0 (rate: 1.02, warmup: 100 its)
```

#### 3. 最终统计
```
Final beta value: 32.0 (max: 32.0)
```

### 参数调优指南

#### 1. beta_warmup_iterations
```matlab
50-150    % 简单问题：较短热身期
100-200   % 复杂问题：较长热身期 (推荐)
```

#### 2. beta_growth_rate
```matlab
1.01-1.02 % 非常温和的增长 (推荐)
1.03-1.05 % 较快增长 (小心使用)
```

#### 3. beta_max
```matlab
16-32     % 适中的最大值 (推荐)
64-128    % 高强度投影 (可能过强)
```

### 收敛判断

新的收敛条件：
```matlab
if (chcnt == chnum && beta >= beta_max)
    break; % 收敛且β达到最大值时停止
end
```

这确保了：
- 目标函数已收敛 (`chcnt == chnum`)
- β投影已达到最大强度 (`beta >= beta_max`)

### 与步长协调

#### 步长调整考虑β值
```matlab
% 高β值时更保守的步长
if (beta > 8.0 && change < eps_lo && mvlim > mv_min * 2.0)
    mvlim = max(mvlim * 0.8, mv_min * 1.5);
end
```

### 实际应用建议

#### 1. 问题类型适配
- **流体问题**：使用默认参数
- **热传递问题**：可能需要更长热身期
- **多物理场问题**：考虑更温和的增长率

#### 2. 网格尺寸考虑
- **细网格**：增加热身迭代数
- **粗网格**：可以使用较快增长率

#### 3. 计算资源平衡
- **时间充足**：使用更温和的参数
- **时间紧张**：适当缩短热身期

---
*更新日期: 2025年6月*  
*版本: 2.0 - 渐进式β投影* 